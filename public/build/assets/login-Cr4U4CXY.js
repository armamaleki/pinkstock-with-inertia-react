import{r as c,u as A,a as H,j as t,H as O}from"./app-BbxXLRul.js";import{I as b}from"./input-error-DlQOMx44.js";import{B as C}from"./button-BtOEBzvR.js";import{I as F}from"./input-A6g_7zzm.js";import{L as N}from"./label-DYjoxDP0.js";import{A as P}from"./auth-layout-BfwMhwOu.js";import{C as Q,a as k}from"./card-C9_oKF3a.js";import{l as B}from"./index-h_6BE13b.js";import{q as u}from"./index-CMWG4mbA.js";import{L as S}from"./loader-circle-Dvs3KLtZ.js";/* empty css            */import"./createLucideIcon-CjC7YcGE.js";import"./index-CuT1okLP.js";import"./app-logo-icon-B-Spf9YY.js";const o=e=>({url:o.url(e),method:"get"});o.definition={methods:["get","head"],url:"/login"};o.url=e=>o.definition.url+u(e);o.get=e=>({url:o.url(e),method:"get"});o.head=e=>({url:o.url(e),method:"head"});const h=e=>({action:o.url(e),method:"get"});h.get=e=>({action:o.url(e),method:"get"});h.head=e=>({action:o.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});o.form=h;const l=e=>({url:l.url(e),method:"post"});l.definition={methods:["post"],url:"/login"};l.url=e=>l.definition.url+u(e);l.post=e=>({url:l.url(e),method:"post"});const w=e=>({action:l.url(e),method:"post"});w.post=e=>({action:l.url(e),method:"post"});l.form=w;const n=e=>({url:n.url(e),method:"post"});n.definition={methods:["post"],url:"/logout"};n.url=e=>n.definition.url+u(e);n.post=e=>({url:n.url(e),method:"post"});const q=e=>({action:n.url(e),method:"post"});q.post=e=>({action:n.url(e),method:"post"});n.form=q;const s=e=>({url:s.url(e),method:"post"});s.definition={methods:["post"],url:"/verify"};s.url=e=>s.definition.url+u(e);s.post=e=>({url:s.url(e),method:"post"});const I=e=>({action:s.url(e),method:"post"});I.post=e=>({action:s.url(e),method:"post"});s.form=I;function te({otp_sent:e=!1,otp_code:T}){const[L,f]=c.useState(e),{props:E}=A(),[a,m]=c.useState(0),{data:d,setData:x,post:g,processing:i,errors:j,reset:_}=H({phone:"",otp:""});c.useEffect(()=>{let r;return a>0&&(r=setInterval(()=>{m(p=>p-1)},1e3)),()=>clearInterval(r)},[a]);const y=r=>{r.preventDefault(),!(a>0)&&g(B.url(),{preserveScroll:!0,onSuccess:p=>{f(!0),m(120);const v=p?.props?.flash?.otp_code||E?.flash?.otp_code;v&&console.log("OTP Code (for testing):",v)}})},D=r=>{r.preventDefault(),g(s().url,{preserveScroll:!0})};return t.jsxs(P,{title:"ورود و یا ثبت نام",description:"لطفا برای ورود و یا ثبت نام لطفا تلفن همراه خود را وارد کنید.",children:[t.jsx(O,{title:"ورود|ثبت نام"}),t.jsx(Q,{children:t.jsx(k,{children:L?t.jsxs("form",{onSubmit:D,className:"flex flex-col gap-6",dir:"rtl",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(N,{htmlFor:"otp",children:"کد تایید"}),t.jsx(F,{id:"otp",type:"text",name:"otp",placeholder:"کد ۵ رقمی",value:d.otp,onChange:r=>x("otp",r.target.value),required:!0}),t.jsx(b,{message:j.otp})]}),t.jsx("input",{type:"hidden",name:"phone",value:d.phone}),t.jsx(C,{type:"submit",className:"w-full",disabled:i,children:i?t.jsx(S,{className:"h-4 w-4 animate-spin"}):"ورود به حساب"}),t.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mt-2",children:[t.jsx("button",{type:"button",className:"underline",onClick:()=>{f(!1),_("otp"),m(0)},children:"تغییر شماره"}),a>0?t.jsxs("span",{children:["ارسال مجدد در"," ",t.jsx("span",{className:"font-bold",children:a})," ","ثانیه"]}):t.jsx("button",{type:"button",onClick:y,className:"text-blue-600 underline",children:"ارسال مجدد کد"})]})]}):t.jsxs("form",{onSubmit:y,className:"flex flex-col gap-6",dir:"rtl",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(N,{htmlFor:"phone",children:"تلفن همراه"}),t.jsx(F,{id:"phone",type:"tel",name:"phone",placeholder:"0912...",value:d.phone,onChange:r=>x("phone",r.target.value),required:!0,autoFocus:!0,autoComplete:"tel"}),t.jsx(b,{message:j.phone})]}),t.jsx(C,{type:"submit",className:"w-full relative",disabled:i||a>0,children:i?t.jsx(S,{className:"h-4 w-4 animate-spin"}):a>0?t.jsxs(t.Fragment,{children:["ارسال مجدد تا"," ",t.jsx("span",{className:"font-bold",children:a})," ","ثانیه"]}):"ارسال کد ورود"})]})})})]})}export{te as default};
