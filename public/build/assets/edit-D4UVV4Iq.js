import{a as R,r as v,j as e,h as w}from"./app-D4TerDJZ.js";import{T as F,C as z}from"./CkEditor-C7P-APsn.js";import{I as A}from"./image-cropper-CDhBUMwk.js";import{I as d}from"./input-error-DTBr4lzn.js";import{B as b}from"./button-BAdnvpL6.js";import{C as G,b as J,a as K}from"./card-CSmACJzL.js";import{I as g}from"./input-CDTpnWo4.js";import{L as n}from"./label-D31toKgR.js";import{m as P,p as j,M as Q}from"./manager-layout-B3E7Kj1B.js";import{S as y}from"./react-select.esm-D-ge9lMM.js";/* empty css            */import"./createLucideIcon-Br6TeqyJ.js";import"./index-DKdJqF8l.js";import"./index-BqkjirTM.js";import"./index-D07-IkCq.js";import"./index-k_2Y0Ovm.js";import"./index-CuayqbMt.js";import"./index-P9Mfl8No.js";import"./index-CMWG4mbA.js";import"./user-Zmnk1x9w.js";import"./newspaper-BJMHLk6y.js";import"./breadcrumbs-NAYCHwXI.js";import"./extends-CF3RwP-h.js";import"./floating-ui.dom-CjS6efmT.js";function je({productCategoriesLists:E,productItem:i,attributesList:S}){const k=[{title:"مدیریت",href:P.index()},{title:"محصولات",href:j.index()},{title:"ویرایش کردن محصول",href:"#"}],{data:t,setData:l,patch:O,processing:N,errors:o,reset:V,clearErrors:L}=R({name:i.data.name||"",slug:i.data.slug||"",price:i.data.price||"",quantity:i.data.quantity||"",meta_title:i.data.meta_title||"",meta_description:i.data.meta_description||"",short_description:i.data.short_description||"",description:i.data.description||"",category:i.data.categories?.map(a=>a.id)||[],attributes:[]}),C=E.data.map(a=>({value:a.id,label:a.name})),[c,q]=v.useState({}),M=a=>{a.preventDefault(),q({}),L();const s={};if(t.name?t.name.length>250&&(s.name="نام محصول نباید بیشتر از ۲۵۰ کاراکتر باشد"):s.name="نام محصول الزامی است",t.slug?t.slug.length>250&&(s.slug="آدرس اینترنتی نباید بیشتر از ۲۵۰ کاراکتر باشد"):s.slug="آدرس اینترنتی الزامی است",t.quantity||(s.quantity="موجودی الزامیست"),t.meta_title?t.meta_title.length<50?s.meta_title="تیتر متا نباید کمتر از 50 کاراکتر باشد":t.meta_title.length>65&&(s.meta_title="تیتر متا نباید بیشتر از 65 کاراکتر باشد"):s.meta_title="تیتر متا الزامیست",t.meta_description?t.meta_description.length<120?s.meta_description="توضیح متا نباید کمتر از 120 کاراکتر باشد":t.meta_description.length>155&&(s.meta_description="توضیح متا نباید بیشتر از 155 کاراکتر باشد"):s.meta_description="توضیحات متا الزامیست",t.short_description?t.short_description.length>250&&(s.short_description="توضیح کوتاه نباید بیشتر از 250 کاراکتر باشد"):s.short_description="توضیحات کوتاه الزامیست",t.description||(s.description="توضیحات الزامیه "),t.category.length||(s.category="حداقل یک دسته بندی انتخاب کنید"),Object.keys(s).length>0){q(s);return}O(j.update(i.data.slug),{onSuccess:()=>V()})},f=i.data.attributes?.length?i.data.attributes.map(a=>({name:a.name,value:a.value})):[{name:null,value:null}],[u,h]=v.useState(f),[$,_]=v.useState({}),B=S.data.map(a=>({value:a.name,label:a.name}));v.useEffect(()=>{async function a(){for(const s of f)if(s.name){const p=(await w.get(`/manager/attribute/${s.name}/values`)).data.values.map(m=>({label:m,value:m}));_(m=>({...m,[s.name]:p}))}l("attributes",f)}a()},[]);const D=async(a,s)=>{const r=[...u];r[s].name=a.value,r[s].value=null,h(r),l("attributes",r);try{const m=(await w.get(`/manager/attribute/${a.value}/values`)).data.values.map(x=>({label:x,value:x}));_(x=>({...x,[a.value]:m}))}catch(p){console.error(p),_(m=>({...m,[a.value]:[]}))}},T=(a,s)=>{const r=[...u];r[s].value=a.value,h(r),l("attributes",r)},H=a=>{const s=u.filter((r,p)=>p!==a);h(s),l("attributes",s)};return e.jsx(Q,{breadcrumbs:k,children:e.jsxs(G,{className:"bg-gray-800",children:[e.jsx(J,{children:"اضافه کردن محصول جدید"}),e.jsxs(K,{children:[e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(n,{htmlFor:"name",children:"نام محصول"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(g,{name:"name",id:"name",value:t.name,onChange:a=>l("name",a.target.value),type:"text",placeholder:"[نوع محصول] + [برند] + [ویژگی کلیدی یا مدل] + [ویژگی خاص یا مزیت]{اجباری}"}),e.jsx(d,{message:o.name||c.name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(n,{htmlFor:"slug",children:"آدرس اینترنتی"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(g,{name:"slug",id:"slug",value:t.slug,onChange:a=>l("slug",a.target.value),type:"text",placeholder:"[نوع محصول] + [برند] + [ویژگی کلیدی یا مدل] + [ویژگی خاص یا مزیت]{اجباری , ترجیها انگلیسی باشد}"}),e.jsx(d,{message:o.slug||c.slug})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(n,{htmlFor:"category",children:"دسته بندی محصول"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(y,{id:"category",isMulti:!0,placeholder:"چند دسته بندی انتخاب کنید...",options:C,value:C.filter(a=>t.category.includes(a.value)),onChange:a=>l("category",a?a.map(s=>s.value):[]),className:"text-black"}),e.jsx(d,{message:o.category||c.category})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-start gap-2 md:grid-cols-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(n,{children:"ویژگی های محصول"}),e.jsx(b,{type:"button",variant:"destructive",onClick:()=>{const a=[...u,{name:null,value:null}];h(a),l("attributes",a)},children:"ویژگی جدید"})]}),e.jsx("div",{className:"space-y-2 col-span-1 md:col-span-3",children:u.map((a,s)=>e.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-gray-700 p-3 rounded",children:[e.jsx(y,{placeholder:"عنوان ویژگی",value:a.name?{label:a.name,value:a.name}:null,onChange:r=>D(r,s),options:B,className:"text-black"}),e.jsx(y,{placeholder:"مقدار ویژگی",value:a.value?{label:a.value,value:a.value}:null,onChange:r=>T(r,s),options:$[a.name]||[],className:"text-black"}),e.jsx(b,{type:"button",variant:"destructive",className:"w-full",onClick:()=>H(s),children:"حذف"})]},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(n,{htmlFor:"price",children:"قیمت محصول"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(g,{name:"price",id:"price",value:t.price,onChange:a=>l("price",a.target.value),type:"text",placeholder:"{درصورت خالی بودن میزنه ناموجود و قابل خرید نیست }"}),e.jsx(d,{message:o.price||c.price})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(n,{htmlFor:"quantity",children:"موجودی انبار"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(g,{name:"quantity",id:"quantity",value:t.quantity,onChange:a=>l("quantity",a.target.value),type:"text",placeholder:"{اجباریه و فقط عدد وارد کنید در سایت نمایش داده میشود}"}),e.jsx(d,{message:o.quantity||c.quantity})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(n,{htmlFor:"meta_title",children:"تیتر متا"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(g,{name:"meta_title",id:"meta_title",value:t.meta_title,onChange:a=>l("meta_title",a.target.value),type:"text",placeholder:"[کلمه کلیدی اصلی] + [مزیت/نتیجه جذاب]"}),e.jsx(d,{message:o.meta_title||c.meta_title})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(n,{htmlFor:"meta_description",children:"توضیح متا "}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(F,{name:"meta_description",id:"meta_description",value:t.meta_description,onChange:a=>l("meta_description",a.target.value),placeholder:"[موضوع اصلی] + [مزیت یا نتیجه برای کاربر] + [دعوت به اقدام یا جذابیت]"}),e.jsx(d,{message:o.meta_description||c.meta_description})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(n,{htmlFor:"short_description",children:"توضیح کوتاه"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(F,{name:"short_description",id:"short_description",value:t.short_description,onChange:a=>l("short_description",a.target.value),placeholder:"[موضوع اصلی] + [مزیت یا نتیجه برای کاربر] + [دعوت به اقدام یا جذابیت]"}),e.jsx(d,{message:o.short_description||c.short_description})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"message",children:"توضیحات محصول"}),e.jsx(d,{message:o.description||c.description}),e.jsx(z,{value:t.description,onChange:a=>l("description",a)})]}),e.jsx(b,{type:"submit",className:"relative w-full",disabled:N,children:N?"در حال ذخیره...":"ذخیره"})]}),e.jsx(A,{url:j.avatar(i.data.slug)}),e.jsx("img",{src:i.data.avatar,alt:""}),e.jsx(A,{text:"آپلود گالری",url:j.gallery(i.data.slug)}),e.jsx("div",{className:"flex flex-wrap",children:i.data.galleries.map((a,s)=>e.jsx("img",{src:a,alt:""},s))})]})]})})}export{je as default};
