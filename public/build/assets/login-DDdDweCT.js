import{r as n,u as F,a as S,j as e,H as w}from"./app-CRy9AfdX.js";import{I as h}from"./input-error-zCZwCP8X.js";import{B as x}from"./button-P5yEV-ab.js";import{I as f}from"./input-DEmZ2fV4.js";import{L as j}from"./label-BhQmFRM3.js";import{A as I}from"./auth-layout-vF56qeaf.js";import{C as L,a as E}from"./card-B4vDjqTq.js";import{l as _}from"./index-h_6BE13b.js";import{L as g}from"./loader-circle-lSzvzBtL.js";/* empty css            */import"./createLucideIcon-DYtXt9MH.js";import"./index-BA45m-Ix.js";import"./app-logo-icon-8cqSknrh.js";import"./index-CMWG4mbA.js";function M({otp_sent:v=!1,otp_code:D}){const[b,i]=n.useState(v),{props:C}=F(),[s,o]=n.useState(0),{data:a,setData:p,post:m,processing:r,errors:c,reset:N}=S({phone:"",otp:""});n.useEffect(()=>{let t;return s>0&&(t=setInterval(()=>{o(l=>l-1)},1e3)),()=>clearInterval(t)},[s]);const d=t=>{t.preventDefault(),!(s>0)&&m(_.url(),{preserveScroll:!0,onSuccess:l=>{i(!0),o(120);const u=l?.props?.flash?.otp_code||C?.flash?.otp_code;u&&console.log("OTP Code (for testing):",u)}})},y=t=>{t.preventDefault(),m(verify().url,{preserveScroll:!0})};return e.jsxs(I,{title:"ورود و یا ثبت نام",description:"لطفا برای ورود و یا ثبت نام لطفا تلفن همراه خود را وارد کنید.",children:[e.jsx(w,{title:"ورود|ثبت نام"}),e.jsx(L,{children:e.jsx(E,{children:b?e.jsxs("form",{onSubmit:y,className:"flex flex-col gap-6",dir:"rtl",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"otp",children:"کد تایید"}),e.jsx(f,{id:"otp",type:"text",name:"otp",placeholder:"کد ۵ رقمی",value:a.otp,onChange:t=>p("otp",t.target.value),required:!0}),e.jsx(h,{message:c.otp})]}),e.jsx("input",{type:"hidden",name:"phone",value:a.phone}),e.jsx(x,{type:"submit",className:"w-full",disabled:r,children:r?e.jsx(g,{className:"h-4 w-4 animate-spin"}):"ورود به حساب"}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 mt-2",children:[e.jsx("button",{type:"button",className:"underline",onClick:()=>{i(!1),N("otp"),o(0)},children:"تغییر شماره"}),s>0?e.jsxs("span",{children:["ارسال مجدد در"," ",e.jsx("span",{className:"font-bold",children:s})," ","ثانیه"]}):e.jsx("button",{type:"button",onClick:d,className:"text-blue-600 underline",children:"ارسال مجدد کد"})]})]}):e.jsxs("form",{onSubmit:d,className:"flex flex-col gap-6",dir:"rtl",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"phone",children:"تلفن همراه"}),e.jsx(f,{id:"phone",type:"tel",name:"phone",placeholder:"0912...",value:a.phone,onChange:t=>p("phone",t.target.value),required:!0,autoFocus:!0,autoComplete:"tel"}),e.jsx(h,{message:c.phone})]}),e.jsx(x,{type:"submit",className:"w-full relative",disabled:r||s>0,children:r?e.jsx(g,{className:"h-4 w-4 animate-spin"}):s>0?e.jsxs(e.Fragment,{children:["ارسال مجدد تا"," ",e.jsx("span",{className:"font-bold",children:s})," ","ثانیه"]}):"ارسال کد ورود"})]})})})]})}export{M as default};
