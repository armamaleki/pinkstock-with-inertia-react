import{a as B,r as x,j as e,e as D}from"./app-CRy9AfdX.js";import{I as o}from"./input-error-zCZwCP8X.js";import{C as T,b as $,a as H}from"./card-B4vDjqTq.js";import{I as m}from"./input-DEmZ2fV4.js";import{L as l}from"./label-BhQmFRM3.js";import{m as R,p as N,M as z}from"./manager-layout-Bv7IYnRD.js";import{B as v}from"./button-P5yEV-ab.js";import{T as C,C as G}from"./CkEditor-CIxJVaua.js";import{S as j}from"./react-select.esm-CQzVg-SL.js";/* empty css            */import"./createLucideIcon-DYtXt9MH.js";import"./index-BA45m-Ix.js";import"./index-CMWG4mbA.js";import"./newspaper-BVtyHQl7.js";import"./breadcrumbs-BPNACvDh.js";import"./floating-ui.dom-CjS6efmT.js";function ne({productCategoriesLists:q,attributesList:F}){const w=[{title:"مدیریت",href:R.index()},{title:"محصولات",href:N.index()},{title:"اضافه کردن محصول جدید",href:"#"}],{data:a,setData:i,post:S,processing:_,errors:n,reset:A,clearErrors:E}=B({name:"",slug:"",price:"",quantity:"",meta_title:"",meta_description:"",short_description:"",description:"",category:[],attributes:[]}),f=q.data.map(s=>({value:s.id,label:s.name})),[c,b]=x.useState({}),k=s=>{s.preventDefault(),b({}),E();const t={};if(a.name?a.name.length>250&&(t.name="نام محصول نباید بیشتر از ۲۵۰ کاراکتر باشد"):t.name="نام محصول الزامی است",a.slug?a.slug.length>250&&(t.slug="آدرس اینترنتی نباید بیشتر از ۲۵۰ کاراکتر باشد"):t.slug="آدرس اینترنتی الزامی است",a.quantity||(t.quantity="موجودی الزامیست"),a.meta_title?a.meta_title.length<50?t.meta_title="تیتر متا نباید کمتر از 50 کاراکتر باشد":a.meta_title.length>65&&(t.meta_title="تیتر متا نباید بیشتر از 65 کاراکتر باشد"):t.meta_title="تیتر متا الزامیست",a.meta_description?a.meta_description.length<120?t.meta_description="توضیح متا نباید کمتر از 120 کاراکتر باشد":a.meta_description.length>155&&(t.meta_description="توضیح متا نباید بیشتر از 155 کاراکتر باشد"):t.meta_description="توضیحات متا الزامیست",a.short_description?a.short_description.length>250&&(t.short_description="توضیح کوتاه نباید بیشتر از 250 کاراکتر باشد"):t.short_description="توضیحات کوتاه الزامیست",a.description||(t.description="توضیحات الزامیه "),a.category.length||(t.category="حداقل یک دسته بندی انتخاب کنید"),Object.keys(t).length>0){b(t);return}S(N.store(),{onSuccess:()=>A()})},[d,p]=x.useState([{name:null,value:null}]),[O,y]=x.useState({}),I=F.data.map(s=>({value:s.name,label:s.name})),L=async(s,t)=>{const r=[...d];r[t].name=s.value,r[t].value=null,p(r),i("attributes",r);try{const h=(await D.get(`/manager/attribute/${s.value}/values`)).data.values.map(g=>({label:g,value:g}));y(g=>({...g,[s.value]:h}))}catch(u){console.error(u),y(h=>({...h,[s.value]:[]}))}},M=(s,t)=>{const r=[...d];r[t].value=s.value,p(r),i("attributes",r)},V=s=>{const t=d.filter((r,u)=>u!==s);p(t),i("attributes",t)};return e.jsx(z,{breadcrumbs:w,children:e.jsxs(T,{className:"bg-gray-800",children:[e.jsx($,{children:"اضافه کردن محصول جدید"}),e.jsx(H,{children:e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(l,{htmlFor:"name",children:"نام محصول"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(m,{name:"name",id:"name",value:a.name,onChange:s=>i("name",s.target.value),type:"text",placeholder:"[نوع محصول] + [برند] + [ویژگی کلیدی یا مدل] + [ویژگی خاص یا مزیت]{اجباری}"}),e.jsx(o,{message:n.name||c.name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(l,{htmlFor:"slug",children:"آدرس اینترنتی"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(m,{name:"slug",id:"slug",value:a.slug,onChange:s=>i("slug",s.target.value),type:"text",placeholder:"[نوع محصول] + [برند] + [ویژگی کلیدی یا مدل] + [ویژگی خاص یا مزیت]{اجباری , ترجیها انگلیسی باشد}"}),e.jsx(o,{message:n.slug||c.slug})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(l,{htmlFor:"category",children:"دسته بندی محصول"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(j,{id:"category",isMulti:!0,placeholder:"چند دسته بندی انتخاب کنید...",options:f,value:f.filter(s=>a.category.includes(s.value)),onChange:s=>i("category",s?s.map(t=>t.value):[]),className:"text-black"}),e.jsx(o,{message:n.category||c.category})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-start gap-2 md:grid-cols-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(l,{children:"ویژگی های محصول"}),e.jsx(v,{type:"button",variant:"destructive",onClick:()=>{const s=[...d,{name:null,value:null}];p(s),i("attributes",s)},children:"ویژگی جدید"})]}),e.jsx("div",{className:"space-y-2 col-span-1 md:col-span-3",children:d.map((s,t)=>e.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-gray-700 p-3 rounded",children:[e.jsx(j,{placeholder:"عنوان ویژگی",value:s.name?{label:s.name,value:s.name}:null,onChange:r=>L(r,t),options:I,className:"text-black"}),e.jsx(j,{placeholder:"مقدار ویژگی",value:s.value?{label:s.value,value:s.value}:null,onChange:r=>M(r,t),options:O[s.name]||[],className:"text-black"}),e.jsx(v,{type:"button",variant:"destructive",className:"w-full",onClick:()=>V(t),children:"حذف"})]},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(l,{htmlFor:"price",children:"قیمت محصول"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(m,{name:"price",id:"price",value:a.price,onChange:s=>i("price",s.target.value),type:"text",placeholder:"{درصورت خالی بودن میزنه ناموجود و قابل خرید نیست }"}),e.jsx(o,{message:n.price||c.price})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(l,{htmlFor:"quantity",children:"موجودی انبار"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(m,{name:"quantity",id:"quantity",value:a.quantity,onChange:s=>i("quantity",s.target.value),type:"text",placeholder:"{اجباریه و فقط عدد وارد کنید در سایت نمایش داده میشود}"}),e.jsx(o,{message:n.quantity||c.quantity})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(l,{htmlFor:"meta_title",children:"تیتر متا"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(m,{name:"meta_title",id:"meta_title",value:a.meta_title,onChange:s=>i("meta_title",s.target.value),type:"text",placeholder:"[کلمه کلیدی اصلی] + [مزیت/نتیجه جذاب]"}),e.jsx(o,{message:n.meta_title||c.meta_title})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(l,{htmlFor:"meta_description",children:"توضیح متا "}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(C,{name:"meta_description",id:"meta_description",value:a.meta_description,onChange:s=>i("meta_description",s.target.value),placeholder:"[موضوع اصلی] + [مزیت یا نتیجه برای کاربر] + [دعوت به اقدام یا جذابیت]"}),e.jsx(o,{message:n.meta_description||c.meta_description})]})]}),e.jsxs("div",{className:"grid grid-cols-1 items-center gap-2 md:grid-cols-4",children:[e.jsx(l,{htmlFor:"short_description",children:"توضیح کوتاه"}),e.jsxs("div",{className:"col-span-1 md:col-span-3",children:[e.jsx(C,{name:"short_description",id:"short_description",value:a.short_description,onChange:s=>i("short_description",s.target.value),placeholder:"[موضوع اصلی] + [مزیت یا نتیجه برای کاربر] + [دعوت به اقدام یا جذابیت]"}),e.jsx(o,{message:n.short_description||c.short_description})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"message",children:"توضیحات محصول"}),e.jsx(o,{message:n.description||c.description}),e.jsx(G,{value:a.description,onChange:s=>i("description",s)})]}),e.jsx(v,{type:"submit",className:"relative w-full",disabled:_,children:_?"در حال ذخیره...":"ذخیره"})]})})]})})}export{ne as default};
